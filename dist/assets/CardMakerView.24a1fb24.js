var Ft=Object.defineProperty;var ct=(o,l,a)=>l in o?Ft(o,l,{enumerable:!0,configurable:!0,writable:!0,value:a}):o[l]=a;var r=(o,l,a)=>(ct(o,typeof l!="symbol"?l+"":l,a),a);import{d as bt,i as B,j as Et,k as tt,q as et,l as yt,o as D,c as _,a as u,s as ot,w as m,x as it,y as C,z as lt,F as xt,r as Bt,b as nt,f as Dt,t as _t,p as At,e as Tt,_ as kt}from"./index.9ee3aff0.js";class Yt{constructor(l,a=0,s=0){r(this,"cvs");r(this,"ctx");this.cvs=l,this.ctx=this.cvs.getContext("2d"),this.cvs.width=a,this.cvs.height=s}clear(){this.ctx.clearRect(0,0,this.cvs.width,this.cvs.height)}}function Xt(o){const l=o.width,a=o.height;o.getContext("2d").clearRect(0,0,l,a)}class Pt{constructor(){r(this,"img");r(this,"isLoad",!1);this.img=new Image,this.img.setAttribute("crossOrigin","anonymous")}import(l,a=null){this.isLoad=!1,this.img.src=l,this.img.onload=()=>{this.isLoad=!0,a&&(a.portraitW=this.img.width,a.portraitH=this.img.height)}}}class Wt{constructor(){r(this,"img");r(this,"isLoad",!1);this.img=new Image,this.img.setAttribute("crossOrigin","anonymous")}import(l,a=null){this.img.src=l,this.img.onload=()=>{this.isLoad=!0,a&&(a.shadowDistance=50)}}}class St{constructor(){r(this,"img");r(this,"isLoad",!1);this.img=new Image,this.img.setAttribute("crossOrigin","anonymous")}import(l,a=null){this.isLoad=!1,this.img.src=l,this.img.onload=()=>{this.isLoad=!0,a&&(a.logoX=30,a.logoY=30,a.logoW=a.logo.img.width,a.logoH=a.logo.img.height)}}}class Ut{constructor(){r(this,"portrait",new Pt);r(this,"portraitX",0);r(this,"portraitY",0);r(this,"portraitW",0);r(this,"portraitH",0);r(this,"shadow",new Wt);r(this,"shadowType","default");r(this,"isShine",!1);r(this,"isOverflow",!0);r(this,"shadowDistance",0);r(this,"logo",new St);r(this,"logoX",30);r(this,"logoY",30);r(this,"logoW",100);r(this,"logoH",100);r(this,"code","undefined");r(this,"name","\u672A\u77E5\u540D\u79F0");r(this,"nameEng","undefined");r(this,"label","\u672A\u77E5\u79F0\u53F7");r(this,"party","undefined");r(this,"themeColor","#999999");r(this,"shineColor","#000000");r(this,"nameColor","#000000");r(this,"labelColor","#dddddd");r(this,"borderColor","#333333")}importPortrait(l,a=null){this.portrait.import(l,a)}importShadow(l){this.shadow.import(l)}importLogo(l,a=null){this.logo.import(l,a)}draw(l){Lt(l,this),It(l,this),Ot(l,this),Rt(l,this),jt(l,this),Mt(l,this),$t(l,60)}}function ut(o,l){l.forEach(a=>{var s,t,h,d;a.code==o.party&&(o.importLogo("https://static.vupslash.icu/img/logo/"+o.party+".png",o),o.themeColor=(s=a.themeColor)!=null?s:o.themeColor,o.nameColor=(t=a.nameColor)!=null?t:o.nameColor,o.labelColor=(h=a.labelColor)!=null?h:o.labelColor,o.borderColor=(d=a.borderColor)!=null?d:o.borderColor)})}function at(o){o.importShadow("https://static.vupslash.icu/img/shadow/"+o.shadowType+".png")}function Ht(o,l){let a="undefined";return l.forEach(s=>{s.name==o&&(a=s.code)}),a}function Lt(o,l){const a=o.getContext("2d");a.fillStyle="white",a.fillRect(0,0,o.width,o.height);for(let s=5;s<o.width;s+=30)for(let t=5;t<o.height;t+=30)Vt(a,s,t,l.themeColor);l.isOverflow&&(a.beginPath(),a.fillStyle=l.themeColor,a.moveTo(0,0),a.lineTo(o.width,0),a.lineTo(o.width,o.height/10),a.lineTo(0,o.height/5),a.lineTo(0,0),a.closePath(),a.fill())}function Vt(o,l,a,s){o.beginPath(),o.strokeStyle=s,o.moveTo(l+10,a+5),o.lineTo(l+10,a+15),o.closePath(),o.stroke(),o.beginPath(),o.strokeStyle=s,o.moveTo(l+5,a+10),o.lineTo(l+15,a+10),o.closePath(),o.stroke()}function Mt(o,l){const a=o.getContext("2d");l.logo.isLoad&&a.drawImage(l.logo.img,l.logoX,l.logoY,l.logoW,l.logoH)}function It(o,l){const a=o.getContext("2d");if(l.portrait.isLoad&&l.shadow.isLoad){const s=document.createElement("canvas");s.width=o.width,s.height=o.height;const t=s.getContext("2d");l.shadowDistance!=0&&(t.save(),l.isShine&&(t.shadowColor=l.shineColor,t.shadowBlur=40),t.drawImage(l.portrait.img,l.portraitX+l.portraitW*.05+l.shadowDistance*1.2,l.portraitY+l.portraitH*.05-l.shadowDistance*1,l.portraitW*.9,l.portraitH*.9),t.globalCompositeOperation="source-in",t.drawImage(l.shadow.img,0,0),t.restore()),l.isShine&&(t.shadowColor=l.shineColor,t.shadowBlur=40),t.drawImage(l.portrait.img,l.portraitX,l.portraitY,l.portraitW,l.portraitH),a.drawImage(s,0,0)}}function Ot(o,l){const a=o.getContext("2d"),s=document.createElement("canvas"),t=s.getContext("2d");s.width=o.width,s.height=o.height,l.isOverflow||(t.beginPath(),t.fillStyle=l.themeColor,t.moveTo(0,0),t.lineTo(o.width,0),t.lineTo(o.width,o.height/10),t.lineTo(0,o.height/5),t.lineTo(0,0),t.closePath(),t.fill()),t.beginPath(),t.fillStyle=l.themeColor,t.moveTo(0,o.height),t.lineTo(o.width,o.height),t.lineTo(o.width,o.height/100*78),t.lineTo(0,o.height/100*86),t.lineTo(0,o.height),t.closePath(),t.fill(),t.translate(0,o.height/100*96),t.font="46px zhengkuchaojihei",t.fillStyle=l.nameColor+"11",t.fillText(k(l.name,100),0,0),t.fillRect(0,o.height*.01,o.width,o.height),t.font="32px zhengkuchaojihei",t.fillStyle=l.themeColor,t.fillText(k(l.nameEng,100),0,o.height*.035),a.drawImage(s,0,0)}function Rt(o,l){const a=o.getContext("2d"),s=document.createElement("canvas"),t=s.getContext("2d");s.width=o.width,s.height=o.height;let h=60,d=x(l.label,"zhengkuchaojihei",h,l.labelColor,l.borderColor),f=d[0],p=Math.max(160,d[1]);for(;p>o.width*2/3;)h-=1,d=x(l.label,"zhengkuchaojihei",h,l.labelColor,l.borderColor),f=d[0],p=Math.max(160,d[1]);t.transform(1,-.12,0,1,0,o.height*.865-h*1.43),t.fillStyle=qt(l.themeColor+"aa"),t.beginPath(),t.moveTo(o.width,0),t.lineTo(o.width,h*1.4),t.lineTo(o.width-p-32,h*1.4),t.lineTo(o.width-p-32,0),t.closePath(),t.fill(),t.beginPath(),t.moveTo(o.width-p-46,0),t.lineTo(o.width-p-44,h*1.4),t.lineTo(o.width-p-56,h*1.4),t.lineTo(o.width-p-54,0),t.closePath(),t.fill(),t.beginPath(),t.moveTo(o.width-p-66,0),t.lineTo(o.width-p-64,h*1.4),t.lineTo(o.width-p-76,h*1.4),t.lineTo(o.width-p-74,0),t.closePath(),t.fill(),t.beginPath(),t.moveTo(o.width-p-86,0),t.lineTo(o.width-p-84,h*1.4),t.lineTo(o.width-p-156,h*1.4),t.lineTo(o.width-p-150,0),t.closePath(),t.fill(),t.drawImage(f,o.width-p-16,0),a.drawImage(s,0,0)}function jt(o,l){const a=o.getContext("2d"),s=document.createElement("canvas"),t=s.getContext("2d");s.width=o.width,s.height=o.height,t.transform(1,-.12,0,1,0,o.height*.84);let h=80,d=x(l.name,"zhengkuchaojihei",h,l.nameColor,"#FFFFFF"),f=d[0],p=Math.max(160,d[1]);for(;p>o.width*2/3;)h-=1,d=x(l.name,"zhengkuchaojihei",h,l.nameColor,"#FFFFFF"),f=d[0],p=Math.max(160,d[1]);t.drawImage(f,o.width-p-16,h*.1);let c=40;d=x(l.nameEng,"zhengkuchaojihei",c,l.nameColor,"#FFFFFF"),f=d[0];let E=Math.max(160,d[1]);for(;E>o.width*2/3;)c-=1,d=x(l.nameEng,"zhengkuchaojihei",c,l.nameColor,"#FFFFFF"),f=d[0],E=Math.max(160,d[1]);t.drawImage(f,o.width-E-16,h*1.2),a.drawImage(s,0,0)}function $t(o,l){const a=o.getContext("2d"),s=document.createElement("canvas"),t=s.getContext("2d");s.width=o.width,s.height=o.height,t.drawImage(o,0,0),t.globalCompositeOperation="destination-in",t.fillStyle="white",t.beginPath(),t.moveTo(l,0),t.arcTo(o.width,0,o.width,o.height,l),t.arcTo(o.width,o.height,0,o.height,l),t.arcTo(0,o.height,0,0,l),t.arcTo(0,0,o.width,0,l),t.closePath(),t.fill(),Xt(o),a.drawImage(s,0,0)}function x(o,l,a,s,t){const h=document.createElement("canvas"),d=h.getContext("2d");o.length?h.width=a*o.length:h.width=a,h.height=a*1.3,o.indexOf("^")!=-1&&(h.height*=1.05),d.textAlign="left",d.textBaseline="bottom",d.lineWidth=a/10,t&&(d.strokeStyle=t),s&&(d.fillStyle=s),l="px "+l,d.font=a+l;let f=0;for(let p=0;p<o.length;p++)o[p]!="^"&&o[p]!="_"?(t&&d.strokeText(o[p],f,h.height*.92),s&&d.fillText(o[p],f,h.height*.92),f+=d.measureText(o[p]).width,d.font=a+l):o[p]=="^"?d.font=a*1.2+l:o[p]=="_"&&(d.font=a*.8+l);return[h,f]}function k(o,l){return l>1?o+=k(o,--l):o}function qt(o){return"rgba("+parseInt("0x"+o.slice(1,3))+","+parseInt("0x"+o.slice(3,5))+","+parseInt("0x"+o.slice(5,7))+","+parseInt("0x"+o.slice(7,9))/255+")"}class Nt{constructor(){r(this,"isDown",!1);r(this,"x",0);r(this,"y",0);r(this,"startX",0);r(this,"startY",0);r(this,"screenRatio",1);r(this,"isMoveable",!1);r(this,"x2",0);r(this,"y2",0);r(this,"startX2",0);r(this,"startY2",0);r(this,"distance",0)}}const v=o=>(At("data-v-bc787e91"),o=o(),Tt(),o),zt=Dt(`<div class="p-5 text-center" id="title" data-v-bc787e91><h1 data-v-bc787e91><a class="link-light text-decoration-none fw-bold display-5" href="" data-v-bc787e91> \u5361\u724C\u5236\u4F5C\u5668 </a><span class="btn btn-primary btn-help" data-bs-toggle="modal" data-bs-target="#modal-help" data-v-bc787e91> ? </span></h1><div class="modal fade" id="modal-help" data-v-bc787e91><div class="modal-dialog modal-dialog-centered" data-v-bc787e91><div class="modal-content bg-dark text-white shadow-lg rounded-1rem" data-v-bc787e91><div class="modal-header border-vup p-2" data-v-bc787e91><h4 class="modal-title mx-auto" data-v-bc787e91>\u6CE8\u610F\u4E8B\u9879</h4></div><pre class="modal-body text-start" data-v-bc787e91>1. \u81EA\u5B9A\u4E49\u7ACB\u7ED8\u5EFA\u8BAE\u4F7F\u7528700*700\u5927\u5C0F\u5E26\u7684\u900F\u660E\u80CC\u666F\u56FE\u7247(.png)\uFF0C\u81EA\u5B9A\u4E49\u52BF\u529B\u56FE\u6807\u5EFA\u8BAE\u4F7F\u7528100*100\u5927\u5C0F\u3002

2. \u4F7F\u7528\u9F20\u6807\u62D6\u62FD\u5361\u724C\u9884\u89C8\u5904\u79FB\u52A8\u7ACB\u7ED8\uFF0C\u6EDA\u8F6E\u7F29\u653E\u7ACB\u7ED8\uFF1B\u89E6\u5C4F\u8BBE\u5907\u5355\u6307\u79FB\u52A8\u7ACB\u7ED8\uFF0C\u53CC\u6307\u7F29\u653E\u7ACB\u7ED8\u3002

3. \u8F93\u5165\u6587\u5B57\u4E4B\u524D\u4F7F\u7528[^]\u7B26\u53F7\u751F\u6210\u5927\u4E00\u53F7\u6587\u5B57\uFF0C\u4F7F\u7528[_]\u7B26\u53F7\u751F\u6210\u5C0F\u4E00\u53F7\u6587\u5B57(\u5982&quot;\u4E2D^\u5927_\u5C0F&quot;\u5C06\u751F\u6210\u4E2D\u7B49\u5B57\u53F7\u7684&quot;\u4E2D&quot;\uFF0C\u5927\u5B57\u53F7\u7684&quot;\u5927&quot;\uFF0C\u5C0F\u5B57\u53F7\u7684&quot;\u5C0F&quot;)\u3002

4. \u672C\u5DE5\u5177\u4E3A\u5F00\u6E90\u9879\u76EE\uFF0C\u6B64\u5236\u4F5C\u5668\u5185\u7528\u6237\u6570\u636E\u7684\u4E0A\u4F20\u4E0E\u5904\u7406\u5B8C\u5168\u8FD0\u884C\u5728\u672C\u5730\uFF0C\u65E0\u670D\u52A1\u5668\u4EA4\u4E92\uFF0C\u8BF7\u653E\u5FC3\u98DF\u7528\u3002

5. \u6B64\u5DE5\u5177\u4E3AVUP\u6740\u5B98\u65B9\u5E73\u53F0\u5DE5\u5177\uFF0C\u9664\u5176\u81EA\u5E26\u6570\u636E\u5916\uFF0C\u5BF9\u4EFB\u4F55\u7F18\u7531\u5728\u4F7F\u7528\u6B64\u5DE5\u5177\u65F6\u4EA7\u751F\u7684\u5BF9\u7528\u6237\u81EA\u5DF1\u6216\u522B\u4EBA\u9020\u6210\u7684\u4EFB\u4F55\u5F62\u5F0F\u7684\u635F\u5931\u548C\u635F\u5BB3\u4E0D\u62C5\u5F53\u8D23\u4EFB\u3002

6. \u7279\u522B\u611F\u8C22 \u2308\u4E03\u6D77\u5E7D\u5A34\u230B \u5728\u65E9\u671F\u4E3A\u672C\u9879\u76EE\u63D0\u4F9B\u7684\u7F8E\u672F\u652F\u6301\uFF0C\u56E0\u6B64\u8BBE\u4E3A\u6A21\u677F\u3002</pre><div class="modal-footer p-2 border-0 mx-auto" data-v-bc787e91><button type="button" class="btn" data-bs-dismiss="modal" data-v-bc787e91> \u5DF2\u9605 </button></div></div></div></div></div>`,1),Jt={class:"container-fluid text-light"},Gt={id:"card_maker",class:"container row bg-dark p-3 mx-auto rounded-top-1rem"},Kt={id:"card_view",class:"text-center center"},Qt={key:0,id:"single_editor",class:"row center card-editor"},Zt={class:"center"},te=v(()=>u("div",{class:"col-12 fw-bold my-2 center border-vup"},[u("span",null,"\u89D2\u8272\u7ACB\u7ED8")],-1)),ee={class:"col-12 fw-bold my-2 center"},oe={class:"input-group"},ie=v(()=>u("span",{class:"input-group-text"},"\u7ACB\u7ED8\u53EF\u6EA2\u51FA\u8FB9\u7F18",-1)),le={class:"div-checkbox"},ne=v(()=>u("label",{for:"is-overflow"},null,-1)),ue={class:"input-group"},ae=v(()=>u("span",{class:"input-group-text"},"\u7ACB\u7ED8\u53D1\u5149",-1)),se={class:"div-checkbox div-shine"},re=v(()=>u("label",{for:"is-shine"},null,-1)),de={class:"center mx-2"},pe=["disabled"],he={class:"input-group"},ge=v(()=>u("span",{class:"input-group-text"},"\u7ACB\u7ED8\u5750\u6807",-1)),me={class:"input-group"},ve=v(()=>u("span",{class:"input-group-text"},"\u7ACB\u7ED8\u5C3A\u5BF8",-1)),we={class:"input-group"},Ce=v(()=>u("span",{class:"input-group-text"},"\u9634\u5F71\u56FE\u6848",-1)),fe=v(()=>u("option",{value:"default"},"\u9ED8\u8BA4",-1)),Fe=v(()=>u("option",{value:"undefined",disabled:""},"\u672A\u77E5",-1)),ce=[fe,Fe],be={class:"input-group col-12 my-2 center"},Ee=v(()=>u("span",{class:"input-group-text"},"\u9634\u5F71\u8DDD\u79BB",-1)),ye={class:"center"},xe=v(()=>u("div",{class:"col-12 fw-bold my-2 center border-vup"},[u("span",null,"\u89D2\u8272\u4FE1\u606F")],-1)),Be={class:"input-group"},De=v(()=>u("span",{class:"input-group-text"},"\u89D2\u8272\u540D\u79F0",-1)),_e={class:"input-group"},Ae=v(()=>u("span",{class:"input-group-text"},"\u82F1\u6587\u540D\u79F0",-1)),Te={class:"input-group"},ke=v(()=>u("span",{class:"input-group-text"},"\u89D2\u8272\u79F0\u53F7",-1)),Ye={class:"input-group"},Xe=v(()=>u("span",{class:"input-group-text"},"\u89D2\u8272\u52BF\u529B",-1)),Pe=v(()=>u("option",{value:"undefined",disabled:""},"\u672A\u77E5\u52BF\u529B",-1)),We=v(()=>u("option",{value:"custom"},"\u81EA\u5B9A\u4E49",-1)),Se=["value"],Ue={key:0,class:"center"},He={class:"center"},Le=v(()=>u("div",{class:"col-12 fw-bold my-2 center border-vup"},[u("span",null,"\u52BF\u529B\u56FE\u6807")],-1)),Ve={class:"input-group"},Me=v(()=>u("span",{class:"input-group-text"},"\u5750\u6807",-1)),Ie={class:"input-group"},Oe=v(()=>u("span",{class:"input-group-text"},"\u5C3A\u5BF8",-1)),Re=v(()=>u("div",{class:"col-12 fw-bold my-2 center border-vup"},[u("span",null,"\u914D\u8272")],-1)),je={class:"input-group"},$e=v(()=>u("span",{class:"input-group-text"},"\u4E3B\u9898\u989C\u8272",-1)),qe={class:"center mx-2"},Ne={class:"input-group"},ze=v(()=>u("span",{class:"input-group-text"},"\u540D\u79F0\u989C\u8272",-1)),Je={class:"center mx-2"},Ge={class:"input-group"},Ke=v(()=>u("span",{class:"input-group-text"},"\u79F0\u53F7\u989C\u8272",-1)),Qe={class:"center mx-2"},Ze={class:"input-group"},to=v(()=>u("span",{class:"input-group-text"},"\u8F6E\u5ED3\u989C\u8272",-1)),eo={class:"center mx-2"},oo={class:"center"},io=bt({__name:"CardMakerView",setup(o){let s;const t=B(new Ut);let h=!1,d=!1;const f=B(new Nt);let p=0,c=0,E=0,T=0;const Y=B(),y=B();Et(async()=>{await tt.get("https://api.vupslash.icu/json/character_list/").then(n=>{Y.value=n.data}),await tt.get("https://api.vupslash.icu/json/party_list/").then(n=>{y.value=n.data}),P(t.value)}),et(()=>[t.value.portraitW,t.value.portraitH,t.value.portraitX,t.value.portraitY],()=>{var n,e,i,F;t.value.portraitW=(n=Math.round(Math.abs(t.value.portraitW)))!=null?n:0,t.value.portraitH=(e=Math.round(Math.abs(t.value.portraitH)))!=null?e:0,t.value.portraitX=(i=Math.round(t.value.portraitX))!=null?i:0,t.value.portraitY=(F=Math.round(t.value.portraitY))!=null?F:0}),et(()=>JSON.parse(JSON.stringify(t.value)),()=>{h=!0},{deep:!0});function st(n,e,i){const F=n.addEventListener;F("mousemove",g=>{i.x=g.clientX,i.y=g.clientY}),F("mousedown",g=>{i.isDown&&(i.x=g.clientX,i.y=g.clientY,i.startX=i.x,i.startY=i.y,p=e.portraitX,c=e.portraitY)}),F("mouseup",()=>{i.isDown=!1}),F("touchmove",g=>{i.x=g.touches[0].clientX,i.y=g.touches[0].clientY,g.touches.length>=2&&(i.x2=g.touches[1].clientX,i.y2=g.touches[1].clientY)}),F("touchstart",g=>{i.isDown&&(i.x=g.touches[0].clientX,i.y=g.touches[0].clientY,i.startX=i.x,i.startY=i.y,p=e.portraitX,c=e.portraitY,g.touches.length>=2&&(i.isMoveable=!0,i.x2=g.touches[1].clientX,i.y2=g.touches[1].clientY,i.startX2=i.x2,i.startY2=i.y2,i.distance=Math.hypot(i.startX-i.startX2,i.startY-i.startY2),E=e.portraitW,T=e.portraitH))}),F("touchend",g=>{g.touches.length===0?i.isDown=!1:g.touches.length<=1&&(i.isMoveable=!1,i.x=g.touches[0].clientX,i.y=g.touches[0].clientY,i.startX=i.x,i.startY=i.y,p=e.portraitX,c=e.portraitY)})}function X(){(h||d)&&(s.value.clear(),t.value.draw(s.value.cvs),h=!1,d=!1),t.value.portrait.isLoad&&f.value.isDown&&dt(t.value,f.value),window.requestAnimationFrame(X)}function rt(){s=B(new Yt(document.getElementById("card_canvas"),600,870)),st(s.value.cvs,t.value,f.value)}yt(()=>{rt(),setInterval(()=>{d=!0},1e3),window.requestAnimationFrame(X),window.screen.width<=500?f.value.screenRatio=1/2:f.value.screenRatio=2/3});function dt(n,e){if(e.isMoveable){n.portraitX=p+(e.x-e.startX+(e.x2-e.startX2))/e.screenRatio/2,n.portraitY=c+(e.y-e.startY+(e.y2-e.startY2))/e.screenRatio/2;const i=Math.hypot(e.x-e.x2,e.y-e.y2);n.portraitW=E*(i/e.distance),n.portraitH=T*(i/e.distance),n.portraitX+=(E-n.portraitW)/2,n.portraitY+=(T-n.portraitH)/2}else n.portraitX=p+(e.x-e.startX)/e.screenRatio,n.portraitY=c+(e.y-e.startY)/e.screenRatio}function pt(n,e){if(n.portrait.isLoad){const i=e.deltaY,F=n.portraitW,g=n.portraitH;i<0?(n.portraitW*=1.020408,n.portraitH*=1.020408):i>0&&(n.portraitW*=.98,n.portraitH*=.98),n.portraitX+=(F-n.portraitW)/2,n.portraitY+=(g-n.portraitH)/2}}function ht(n,e){ut(n,e)}function gt(n){at(n)}function mt(n,e){const i=URL.createObjectURL(e.target.files[0]);n.importPortrait(i,n),e.target.value=""}function vt(n,e){const i=URL.createObjectURL(e.target.files[0]);n.importLogo(i,n),n.party="custom",e.target.value=""}function wt(n){const e=document.createElement("a"),i=n.label+" "+n.name+".png";e.setAttribute("download",i),s.value.cvs.toBlob(F=>{if(F){const g=URL.createObjectURL(F);e.setAttribute("href",g),e.click()}})}function P(n){n.name="\u4E03\u6D77\u5E7D\u5A34",n.nameEng="NORA SILENT",n.label="\u5E7D\u6D77\u9E22\u884C",n.party=Ht("\u9E3D\u820D",y.value),n.importPortrait("https://static.vupslash.icu/img/portrait/default.png"),at(n),ut(n,y.value),n.shadowDistance=50,n.shadowType="default",n.isOverflow=!0,n.isShine=!1,n.shineColor="#ffffff",n.portraitX=-31,n.portraitY=62,n.portraitW=632,n.portraitH=691,n.logoX=30,n.logoY=30}function Ct(n,e){const i=e.target.files[0],F=new FileReader;F.readAsText(i,"UTF-8"),F.onload=function(g){var A,W,S,U,H,L,V,M,I,O,R,j,$,q,N,z,J,G,K,Q,Z;e.target.value="";const w=JSON.parse(g.target.result);n.name=(A=w.name)!=null?A:"\u672A\u77E5\u540D\u79F0",n.nameEng=(W=w.nameEng)!=null?W:"undefined",n.label=(S=w.label)!=null?S:"\u672A\u77E5\u79F0\u53F7",n.party=(U=w.party)!=null?U:"undefined",n.shadowType=(H=w.shadowType)!=null?H:"default",n.isShine=(L=w.isShine)!=null?L:"false",n.isOverflow=(V=w.isOverflow)!=null?V:"true",n.shadowDistance=(M=w.shadowDistance)!=null?M:"50",n.portraitX=(I=w.portraitX)!=null?I:"0",n.portraitY=(O=w.portraitY)!=null?O:"0",n.portraitW=(R=w.portraitW)!=null?R:"700",n.portraitH=(j=w.portraitH)!=null?j:"700",n.logoX=($=w.logoX)!=null?$:"30",n.logoY=(q=w.logoY)!=null?q:"30",n.logoW=(N=w.logoW)!=null?N:"100",n.logoH=(z=w.logoH)!=null?z:"100",n.themeColor=(J=w.themeColor)!=null?J:"#999999",n.shineColor=(G=w.shineColor)!=null?G:"#000000",n.nameColor=(K=w.nameColor)!=null?K:"#000000",n.labelColor=(Q=w.labelColor)!=null?Q:"#dddddd",n.borderColor=(Z=w.borderColor)!=null?Z:"#333333",n.importLogo("https://static.vupslash.icu/img/logo/"+n.party+".png")}}function ft(n){const e={};e.name=n.name,e.nameEng=n.nameEng,e.label=n.label,e.party=n.party,e.shadowType=n.shadowType,e.isShine=n.isShine,e.isOverflow=n.isOverflow,e.shadowDistance=n.shadowDistance,e.portraitX=n.portraitX,e.portraitY=n.portraitY,e.portraitW=n.portraitW,e.portraitH=n.portraitH,e.logoX=n.logoX,e.logoY=n.logoY,e.logoW=n.logoW,e.logoH=n.logoH,e.themeColor=n.themeColor,e.shineColor=n.shineColor,e.nameColor=n.nameColor,e.labelColor=n.labelColor,e.borderColor=n.borderColor;const F=new Date().toLocaleDateString(),g="data:text/Json;charset=utf-8,"+encodeURIComponent(JSON.stringify(e,null,2)),w=document.createElement("a"),A=n.label+"_"+n.name+"_"+F+".json";w.setAttribute("download",A),w.setAttribute("href",g),w.click()}function b(n){const e=document.querySelector(n);e==null||e.click()}return(n,e)=>(D(),_("div",null,[zt,u("div",Jt,[u("div",Gt,[u("div",Kt,[u("canvas",{id:"card_canvas",onMousedown:e[0]||(e[0]=i=>f.value.isDown=!0),onTouchstartPassive:e[1]||(e[1]=i=>f.value.isDown=!0),onTouchmove:e[2]||(e[2]=ot(()=>{},["prevent"])),onWheel:e[3]||(e[3]=ot(i=>pt(t.value,i),["prevent"]))},null,32)]),Y.value&&y.value?(D(),_("div",Qt,[u("div",Zt,[te,u("div",ee,[u("a",{class:"btn btn-portrait",onClick:e[4]||(e[4]=i=>b("#import-portrait"))}," \u4E0A\u4F20\u81EA\u5B9A\u4E49\u7ACB\u7ED8 ")]),u("input",{id:"import-portrait",type:"file",style:{display:"none"},accept:"image/jpeg, image/png, image/webp, image/jpg",onChange:e[5]||(e[5]=i=>mt(t.value,i))},null,32),u("div",oe,[ie,u("div",le,[m(u("input",{id:"is-overflow",type:"checkbox","onUpdate:modelValue":e[6]||(e[6]=i=>t.value.isOverflow=i)},null,512),[[it,t.value.isOverflow]]),ne])]),u("div",ue,[ae,u("div",se,[m(u("input",{id:"is-shine",type:"checkbox","onUpdate:modelValue":e[7]||(e[7]=i=>t.value.isShine=i)},null,512),[[it,t.value.isShine]]),re]),u("div",de,[m(u("input",{id:"shine-color",class:"input-color",type:"color","onUpdate:modelValue":e[8]||(e[8]=i=>t.value.shineColor=i),disabled:!t.value.isShine},null,8,pe),[[C,t.value.shineColor]]),m(u("input",{class:"input-color-text",type:"text","onUpdate:modelValue":e[9]||(e[9]=i=>t.value.shineColor=i),readonly:"",onClick:e[10]||(e[10]=i=>b("#shine-color"))},null,512),[[C,t.value.shineColor]])])]),u("div",he,[ge,m(u("input",{class:"input-coord",type:"number","onUpdate:modelValue":e[11]||(e[11]=i=>t.value.portraitX=i)},null,512),[[C,t.value.portraitX]]),m(u("input",{class:"input-coord",type:"number","onUpdate:modelValue":e[12]||(e[12]=i=>t.value.portraitY=i)},null,512),[[C,t.value.portraitY]])]),u("div",me,[ve,m(u("input",{class:"input-size",type:"number","onUpdate:modelValue":e[13]||(e[13]=i=>t.value.portraitW=i)},null,512),[[C,t.value.portraitW]]),m(u("input",{class:"input-size",type:"number","onUpdate:modelValue":e[14]||(e[14]=i=>t.value.portraitH=i)},null,512),[[C,t.value.portraitH]])]),u("div",we,[Ce,m(u("select",{class:"form-select select-shadow","data-live-search":"true","onUpdate:modelValue":e[15]||(e[15]=i=>t.value.shadowType=i),onChange:e[16]||(e[16]=i=>gt(t.value))},ce,544),[[lt,t.value.shadowType]])]),u("div",be,[Ee,m(u("input",{class:"input-range",type:"range",min:"0",max:"100",step:"1","onUpdate:modelValue":e[17]||(e[17]=i=>t.value.shadowDistance=i)},null,512),[[C,t.value.shadowDistance]])])]),u("div",ye,[xe,u("div",Be,[De,m(u("input",{type:"text","onUpdate:modelValue":e[18]||(e[18]=i=>t.value.name=i)},null,512),[[C,t.value.name]])]),u("div",_e,[Ae,m(u("input",{type:"text","onUpdate:modelValue":e[19]||(e[19]=i=>t.value.nameEng=i)},null,512),[[C,t.value.nameEng]])]),u("div",Te,[ke,m(u("input",{type:"text","onUpdate:modelValue":e[20]||(e[20]=i=>t.value.label=i)},null,512),[[C,t.value.label]])]),u("div",Ye,[Xe,m(u("select",{class:"form-select select-party","onUpdate:modelValue":e[21]||(e[21]=i=>t.value.party=i),onChange:e[22]||(e[22]=i=>ht(t.value,y.value))},[Pe,We,(D(!0),_(xt,null,Bt(y.value,(i,F)=>(D(),_("option",{key:F,value:i.code},_t(i.name),9,Se))),128))],544),[[lt,t.value.party]])]),t.value.party=="custom"?(D(),_("div",Ue,[u("div",He,[Le,u("div",Ve,[Me,m(u("input",{class:"input-coord",type:"number","onUpdate:modelValue":e[23]||(e[23]=i=>t.value.logoX=i)},null,512),[[C,t.value.logoX]]),m(u("input",{class:"input-coord",type:"number","onUpdate:modelValue":e[24]||(e[24]=i=>t.value.logoY=i)},null,512),[[C,t.value.logoY]])]),u("div",Ie,[Oe,m(u("input",{class:"input-size",type:"number","onUpdate:modelValue":e[25]||(e[25]=i=>t.value.logoW=i)},null,512),[[C,t.value.logoW]]),m(u("input",{class:"input-size",type:"number","onUpdate:modelValue":e[26]||(e[26]=i=>t.value.logoH=i)},null,512),[[C,t.value.logoH]])]),u("button",{class:"btn",onClick:e[27]||(e[27]=i=>b("#import-logo"))},"\u4E0A\u4F20"),u("input",{id:"import-logo",type:"file",style:{display:"none"},accept:"image/jpeg, image/png, image/webp, image/jpg",onChange:e[28]||(e[28]=i=>vt(t.value,i))},null,32)]),Re,u("div",je,[$e,u("div",qe,[m(u("input",{id:"theme-color",class:"input-color",type:"color","onUpdate:modelValue":e[29]||(e[29]=i=>t.value.themeColor=i)},null,512),[[C,t.value.themeColor]]),m(u("input",{class:"input-color-text",type:"text","onUpdate:modelValue":e[30]||(e[30]=i=>t.value.themeColor=i),readonly:"",onClick:e[31]||(e[31]=i=>b("#theme-color"))},null,512),[[C,t.value.themeColor]])])]),u("div",Ne,[ze,u("div",Je,[m(u("input",{id:"name-color",class:"input-color",type:"color","onUpdate:modelValue":e[32]||(e[32]=i=>t.value.nameColor=i)},null,512),[[C,t.value.nameColor]]),m(u("input",{class:"input-color-text",type:"text","onUpdate:modelValue":e[33]||(e[33]=i=>t.value.nameColor=i),readonly:"",onClick:e[34]||(e[34]=i=>b("#name-color"))},null,512),[[C,t.value.nameColor]])])]),u("div",Ge,[Ke,u("div",Qe,[m(u("input",{id:"label-color",class:"input-color",type:"color","onUpdate:modelValue":e[35]||(e[35]=i=>t.value.labelColor=i)},null,512),[[C,t.value.labelColor]]),m(u("input",{class:"input-color-text",type:"text","onUpdate:modelValue":e[36]||(e[36]=i=>t.value.labelColor=i),readonly:"",onClick:e[37]||(e[37]=i=>b("#label-color"))},null,512),[[C,t.value.labelColor]])])]),u("div",Ze,[to,u("div",eo,[m(u("input",{id:"border-color",class:"input-color",type:"color","onUpdate:modelValue":e[38]||(e[38]=i=>t.value.borderColor=i)},null,512),[[C,t.value.borderColor]]),m(u("input",{class:"input-color-text",type:"text","onUpdate:modelValue":e[39]||(e[39]=i=>t.value.borderColor=i),readonly:"",onClick:e[40]||(e[40]=i=>b("#border-color"))},null,512),[[C,t.value.borderColor]])])])])):nt("",!0)]),u("div",oo,[u("a",{class:"btn",onClick:e[41]||(e[41]=i=>b("#import-config"))},"\u5BFC\u5165\u914D\u7F6E"),u("input",{id:"import-config",type:"file",style:{display:"none"},accept:"application/json",onChange:e[42]||(e[42]=i=>Ct(t.value,i))},null,32),u("a",{class:"btn",onClick:e[43]||(e[43]=i=>ft(t.value))},"\u5BFC\u51FA\u914D\u7F6E"),u("a",{class:"btn",onClick:e[44]||(e[44]=i=>P(t.value))},"\u91CD\u7F6E\u914D\u7F6E"),u("a",{class:"btn btn-save",onClick:e[45]||(e[45]=i=>wt(t.value))},"\u4FDD\u5B58\u5361\u7247")])])):nt("",!0)])])]))}});const uo=kt(io,[["__scopeId","data-v-bc787e91"]]);export{uo as default};
